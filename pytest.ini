[pytest]
# Pytest configuration file

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Directories to search for tests
testpaths = tests

# Minimum Python version
minversion = 3.12

# Additional command line options
addopts =
    # Verbose output
    -v
    # Show local variables in tracebacks
    --showlocals
    # Show summary of all test outcomes
    -ra
    # Strict markers (fail on unknown markers)
    --strict-markers
    # Strict config (fail on unknown config options)
    --strict-config
    # Show warnings
    -W default
    # Exclude live tests by default (run with pytest tests/live/ -m live)
    --ignore=tests/live
    # Coverage options (if pytest-cov is installed)
    # --cov=f/development
    # --cov-report=term-missing
    # --cov-report=html:htmlcov

# Custom markers
markers =
    unit: Unit tests that test individual functions in isolation
    integration: Integration tests that test multiple components together
    slow: Tests that take a long time to run
    db: Tests that require database access
    external: Tests that make real external API calls (should be rarely used)
    live_llm: Tests that make real LLM API calls (OpenAI, Gemini). Run with -m live_llm
    live_embeddings: Tests that generate real embeddings via OpenAI. Run with -m live_embeddings
    live: All live tests that use real external APIs. Run with -m live

# Test output options
console_output_style = progress
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Timeout for tests (requires pytest-timeout)
# timeout = 30

# Warnings
filterwarnings =
    # Treat warnings as errors (comment out during development)
    # error
    # Ignore specific warnings
    ignore::DeprecationWarning:
    ignore::PendingDeprecationWarning:

# Environment variables
env =
    TEST_DB_HOST=localhost
    TEST_DB_PORT=5434
    TEST_DB_USER=test_user
    TEST_DB_PASSWORD=test_password
    TEST_DB_NAME=test_business_logic